# 知识点树状图功能说明

## 功能概述

在知识广场中，用户现在可以点击"知识点树状图"模块，跳转到一个全新的思维导图页面，查看完整的小学数学知识点结构。页面采用层级展开的交互方式，先显示年级目录，点击后展开显示具体知识点。

## 主要特性

### 1. 点击跳转
- 在知识广场页面，知识点树状图模块现在支持点击
- 点击后会跳转到专门的思维导图详情页面
- 添加了视觉反馈，包括阴影效果和提示文字

### 2. 思维导图页面
- **页面标题**: 小学数学知识点树状图
- **内容结构**: 按年级和学期组织的小学数学知识点
- **年级覆盖**: 一年级到六年级，每个年级分为上下学期
- **交互方式**: 层级展开，先显示年级目录，点击后展开内容

### 3. 交互功能
- **层级展开**: 页面初始显示12个年级目录卡片
- **点击展开**: 点击年级卡片可展开/收起该年级的知识点
- **缩放支持**: 支持双指缩放，缩放范围0.5x到3x
- **滚动浏览**: 支持垂直滚动查看所有内容
- **返回导航**: 顶部导航栏包含返回按钮

### 4. 视觉设计
- **参考ProcessOn风格**: 采用简洁美观的卡片式设计
- **层次结构**: 使用不同大小的圆点标识不同层级
- **展开指示**: 每个年级卡片都有展开/收起图标
- **颜色搭配**: 采用Material Design 3配色方案
- **圆润设计**: 使用圆角卡片和圆形装饰元素

## 技术实现

### 文件结构
- `KnowledgeSquareScreen.kt` - 知识广场主页面
- `KnowledgeTreeDetailScreen.kt` - 思维导图详情页面
- `MainActivity.kt` - 主活动，包含导航逻辑

### 核心组件
- **GradeDirectorySection**: 年级目录区域组件
- **GradeDirectoryCard**: 年级目录卡片组件（支持展开/收起）
- **TopicCard**: 知识点卡片组件
- **GradeData**: 年级数据类
- **TopicItem**: 知识点数据类

### 状态管理
- 使用`remember { mutableStateOf(false) }`管理每个年级的展开状态
- 每个年级独立控制展开/收起状态
- 支持同时展开多个年级

### 手势支持
- 使用`detectTransformGestures`实现缩放功能
- 缩放状态通过`remember { mutableStateOf(1f) }`管理
- 缩放范围限制在0.5x到3x之间

## 使用方法

1. 在知识广场页面，找到"知识点树状图"模块
2. 点击该模块，系统会跳转到思维导图页面
3. 在思维导图页面，可以：
   - 查看所有年级目录（一年级上、一年级下...六年级下）
   - 点击任意年级卡片展开查看该年级的知识点
   - 再次点击收起内容
   - 使用双指缩放查看内容
   - 垂直滚动浏览所有年级
   - 点击顶部返回按钮回到知识广场

## 交互流程

1. **初始状态**: 显示12个年级目录卡片，所有内容都是收起状态
2. **展开操作**: 点击年级卡片右侧的展开图标（▼），内容向下展开
3. **收起操作**: 点击年级卡片右侧的收起图标（▲），内容向上收起
4. **多级展开**: 可以同时展开多个年级，方便对比不同年级的内容
5. **缩放浏览**: 使用双指缩放可以放大或缩小整个页面内容

## 设计理念

参考[ProcessOn思维导图模板](https://www.processon.com/knowledge/mindmaptemplate)的设计风格，注重：
- **简洁性**: 清晰的信息层次结构，避免信息过载
- **美观性**: 现代化的Material Design风格
- **可用性**: 直观的层级展开交互
- **响应性**: 流畅的展开/收起动画和缩放体验

## 未来扩展

- 可以添加搜索功能，快速定位特定知识点
- 支持知识点收藏和标记
- 添加学习进度跟踪
- 集成更多数学知识点
- 支持自定义展开/收起状态记忆
- 添加知识点之间的关联关系展示
